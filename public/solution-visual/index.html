<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Toronto Crash Visualization</title>

	<!-- bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- custom css -->
	<link rel="stylesheet" href="../../css/style.css">
	<link rel="stylesheet" href="css/style.css">

	<!-- GOOGLE FONTS -->
	<link href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body class="infographic-container">


<header class="d-flex justify-content-center align-items-center" style="position: relative;">
	
	<h1 class="main-title">
		<span class="title-line-1">Cumulative Pedestrian Collisions</span>
		<span class="title-line-2">by Location</span>
	</h1>
	
	<button id="infoButton" style="position: absolute; right: 20px; background: none; border: none; cursor: pointer; font-size: 24px; color: #000; padding: 5px 10px; border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s ease;" onmouseover="this.style.backgroundColor='#e0e0e0'" onmouseout="this.style.backgroundColor='transparent'">â„¹</button>
</header>


	<div class="description-section">
		The final visualization translates these behavioral and outcome-based insights into spatial priorities. The Toronto Collisions Map identifies geographic hotspots and neighborhoods where risks converge, providing a blueprint for where Vision Zero interventions and capital investment can deliver the greatest impact.<br><br>
	</div>

<!-- Filter Bar above map -->
<div class="container" style="max-width: 1250px; margin: 20px auto 0;">
	<div class="filter-bar" style="display: flex; gap: 15px; padding: 10px 20px; align-items: center;">
		<!-- View Mode Toggle -->
		<div class="tile-group" data-group="view">
			<span class="tile-label">View</span>
			<button class="tile active" id="view-mode-map" data-value="map">Map</button>
			<button class="tile" id="view-mode-improvements" data-value="improvements">Improvements</button>
		</div>

		<span class="tile-label">Filters</span>
		<!-- Severity Filter Dropdown -->
		<div class="filter-dropdown-group">
			<button class="filter-btn" id="severity-filter-btn">
				<i class="fas fa-filter"></i>
				<span>Severity</span>
			</button>
			<div class="filter-checkbox-container" id="severity-checkboxes">
				<label class="filter-checkbox-label">
					<input type="checkbox" id="filter-fatal" class="severity-checkbox" checked>
					<span>Fatal</span>
				</label>
				<label class="filter-checkbox-label">
					<input type="checkbox" id="filter-major" class="severity-checkbox" checked>
					<span>Major</span>
				</label>
				<label class="filter-checkbox-label">
					<input type="checkbox" id="filter-minor" class="severity-checkbox" checked>
					<span>Minor</span>
				</label>
				<label class="filter-checkbox-label">
					<input type="checkbox" id="filter-minimal" class="severity-checkbox" checked>
					<span>Minimal</span>
				</label>
			</div>
		</div>

		<!-- Play and Restart Buttons -->
		<div class="control-buttons">
			<div class="play-button" id="playButton">
				<div class="play-triangle"></div>
			</div>
			<div class="restart-button" id="restartButton">
				<svg width="20" height="20" viewBox="0 0 20 20" fill="none">
					<path d="M17.5 2.5V7.5H12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
					<path d="M2.5 10C2.5 14.1421 5.85786 17.5 10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C7.64367 2.5 5.50732 3.55357 4.0625 5.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
			</div>
		</div>
	</div>
</div>

<!-- Main Container -->
<div id="main-container" class="container rounded shadow p-3" style="padding-bottom: 80px !important;">
	<div class="row">
		<!-- Map Visualization -->
		<div id="mapDiv" class="col-9 rounded"></div>

		<!-- Options Panel -->
		<div id="options-panel" class="col-3 rounded shadow-sm p-3">
			<div class="mt-4">
				<h6 class="fw-bold">Top Neighborhoods by Collision Count</h6>
				<div id="locationChart"></div>
			</div>
		</div>
	</div>

	<div class="row mt-3">
		<div class="col-9">
			<div id="timelineDiv" class="rounded"></div>
		</div>
		<div class="col-3 d-flex align-items-center justify-content-end">
		</div>
	</div>
</div>

<!-- bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- d3 -->
<script src="https://d3js.org/d3.v7.min.js"></script>

<!-- Visualization Classes -->
<script src="js/crashPointsVis.js"></script>
<script src="js/mapVis.js"></script>
<script src="js/timelineVis.js"></script>
<script src="js/locationChart.js"></script>
<script src="js/improvementsVis.js"></script>
<script src="js/main.js"></script>

<!-- Dropdown Filter Toggle -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const filterBtn = document.getElementById('severity-filter-btn');
    const checkboxContainer = document.getElementById('severity-checkboxes');

    if (filterBtn && checkboxContainer) {
        filterBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            checkboxContainer.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!filterBtn.contains(e.target) && !checkboxContainer.contains(e.target)) {
                checkboxContainer.classList.remove('show');
            }
        });

        // Prevent closing when clicking inside the dropdown
        checkboxContainer.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    }
});
</script>
</body>
</html>
