<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Time's Effect on Accidents for Pedestrian</title>

    <!-- Load Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>

        .infographic-container {
            background-color: #0A6B4A;
            min-height: 100vh;
            padding: 50px; /* Reduced padding */
        }

        .title-section {
            margin: 10px 30px 20px 30px; /* Reduced margins */
        }

        .main-title {
            color: #FFFFFF !important;
            font-family: 'Overpass', sans-serif !important;
            font-weight: 700 !important;
            font-size: 2rem;
            margin-bottom: 30px;
        }

        .description-section {
            color: #FFFFFF !important;
            font-family: 'Overpass', sans-serif !important;
            font-weight: 400 !important;
            font-size: 1rem !important; /* Reduced from 1.1rem */
            line-height: 1.5 !important; /* Reduced from 1.6 */
            max-width: 700px; /* Reduced from 800px */
            opacity: 0.9;
        }

        /* Time Visualization Styles */
        .time-visualization {
            margin: 20px 30px; /* Reduced margins */
        }

        .time-panels-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .time-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px; /* Reduced from 12px */
            padding: 15px; /* Reduced from 20px */
            min-height: 250px; /* Reduced from 300px */
            transition: all 0.3s ease;
        }

        .time-panel:hover {
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .panel-header {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .time-label {
            font-size: 1.2rem;
            font-weight: 700;
            color: #FFFFFF;
            margin-bottom: 3px;
        }

        .time-range {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .bubbles-container {
            display: flex;
            flex-wrap: wrap;
            gap: 11px; /* Reduced from 12px */
            justify-content: center;
            align-content: flex-start;
            padding: 11px; /* Reduced from 15px */
        }


        /* Timeline Controls */
        .timeline-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: -20px; /* Reduced from -30px */
            padding: 15px; /* Reduced from 20px */
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px; /* Reduced from 12px */
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .control-buttons {
            display: flex;
            gap: 12px; /* Reduced from 15px */
            align-items: center;
        }

        .play-button, .restart-button {
            background: #FFFFFF;
            border-radius: 6px; /* Reduced from 8px */
            width: 45px; /* Reduced from 50px */
            height: 45px; /* Reduced from 50px */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: #0A6B4A;
        }

        .play-button:hover, .restart-button:hover {
            background: #F0F0F0;
            transform: scale(1.05);
        }

        .play-button.playing {
            background: #06D6A0;
            color: white;
        }

        .play-button .play-icon, .restart-button .restart-icon {
            font-size: 1rem; /* Reduced from 1.2rem */
        }

        .filter-dropdown select {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px; /* Reduced from 25px */
            padding: 8px 16px; /* Reduced from 10px 20px */
            color: #0A6B4A;
            font-weight: 600;
            cursor: pointer;
            outline: none;
            transition: all 0.3s ease;
            font-size: 0.9rem; /* Reduced */
        }

        .filter-dropdown select:hover {
            border-color: rgba(255, 255, 255, 0.6);
            background: #FFFFFF;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px; /* Reduced from 15px */
            border-radius: 6px; /* Reduced from 8px */
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            max-width: 250px; /* Reduced from 300px */
            font-size: 0.85rem; /* Reduced from 0.9rem */
            line-height: 1.3; /* Reduced from 1.4 */
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tooltip.show {
            opacity: 1;
        }

        /* Year Scroll Styles */
        .year-scroll-container {
            flex-grow: 1;
            margin-right: 30px;
        }

        #yearScroller {
            width: 100%;
            height: 100px;
        }


        @keyframes bubbleAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Responsive Design - Updated for smaller sizes */
        @media (max-width: 1024px) {
            .time-panels-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .time-panel {
                min-height: 220px;
            }

            .time-label {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            .time-panels-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .timeline-controls {
                flex-direction: column;
                gap: 8px;
                padding: 12px;
            }

            .title-section {
                margin: 15px;
            }

            .main-title {
                font-size: 1.8rem;
            }

            .description-section {
                font-size: 0.95rem;
            }

            .time-visualization {
                margin: 15px;
            }

            .year-scroll-container {
                margin-right: 0;
                margin-bottom: 12px;
                width: 100%;
            }

            #yearScroller {
                height: 70px;
            }

            .time-panel {
                min-height: 200px;
                padding: 12px;
            }

            .bubbles-container {
                gap: 6px;
                padding: 8px;
            }

            .injury-circle {
                width: 6px !important;
                height: 6px !important;
            }
        }

        @media (max-width: 480px) {
            .infographic-container {
                padding: 10px;
            }

            .main-title {
                font-size: 1.5rem;
            }

            .time-label {
                font-size: 1rem;
            }

            .play-button, .restart-button {
                width: 40px;
                height: 40px;
            }

            .filter-dropdown select {
                padding: 6px 12px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
<div class="infographic-container">
    <!-- Title Section -->
    <div class="title-section">
        <h1 class="main-title">Time's Effect on Accidents for Pedestrian</h1>
        <div class="description-section">
            <p style="margin-right: -500px;">Use the year slider and time control to explore how injuries vary across different vehicle types throughout the day and over the years. Click on any vehicle circle to see detailed injury breakdown information. The size of each circle represents the relative number of injuries for that vehicle type during the selected time period.</p>
        </div>
    </div>

    <!-- Time-of-Day Visualization -->
    <div class="time-visualization">
        <!-- Four Time Period Panels -->
        <div class="time-panels-grid">
            <!-- Morning Panel -->
            <div class="time-panel" data-period="morning">
                <div class="panel-header">
                    <div class="time-label">Morning</div>
                    <div class="time-range">5AM – 11AM</div>
                </div>
                <div class="bubbles-container" id="morning-bubbles">
                    <!-- Injury circles will be generated here -->
                </div>
            </div>

            <!-- Afternoon Panel -->
            <div class="time-panel" data-period="afternoon">
                <div class="panel-header">
                    <div class="time-label">Afternoon</div>
                    <div class="time-range">11AM – 4PM</div>
                </div>
                <div class="bubbles-container" id="afternoon-bubbles">
                    <!-- Injury circles will be generated here -->
                </div>
            </div>

            <!-- Evening Panel -->
            <div class="time-panel" data-period="evening">
                <div class="panel-header">
                    <div class="time-label">Evening</div>
                    <div class="time-range">4PM – 8PM</div>
                </div>
                <div class="bubbles-container" id="evening-bubbles">
                    <!-- Injury circles will be generated here -->
                </div>
            </div>

            <!-- Night Panel -->
            <div class="time-panel" data-period="night">
                <div class="panel-header">
                    <div class="time-label">Night</div>
                    <div class="time-range">8PM – 5AM</div>
                </div>
                <div class="bubbles-container" id="night-bubbles">
                    <!-- Injury circles will be generated here -->
                </div>
            </div>
        </div>

        <!-- Timeline Controls -->
        <div class="timeline-controls">
            <!-- YearScroll Container -->
            <div class="year-scroll-container">
                <div id="yearScroller"></div>
            </div>
            <div class="control-buttons">
                <button class="play-button" id="playBtn">
                    <i class="fas fa-play play-icon"></i>
                </button>
                <button class="restart-button" id="restartBtn">
                    <i class="fas fa-redo restart-icon"></i>
                </button>
                <div class="filter-dropdown">
                    <select id="severityFilter">
                        <option value="all">Severity</option>
                        <option value="fatal">Fatal</option>
                        <option value="major">Major</option>
                        <option value="minor">Minor</option>
                        <option value="minimal">Minimal</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <select id="districtFilter">
                        <option value="all">District</option>
                        <option value="Scarborough">Scarborough</option>
                        <option value="North York">North York</option>
                        <option value="Toronto and East York">Toronto and East York</option>
                        <option value="Etobicoke York">Etobicoke York</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="tooltip" class="tooltip"></div>

<!-- Load JS libraries -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="../shared/js/yearScroll.js"></script>
<script src="../shared/js/playButton.js"></script>
<script src="js/pedChart.js"></script>
<script src="js/main.js"></script>

</body>
</html>