<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Injury Visualization</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:100,400,300,400italic,700' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="d-flex flex-column min-vh-100">

<!-- Page Container with Scroll Snap -->
<div id="pageContainer" class="page-container">
    <!-- Page 1: Introduction -->
    <section class="page" id="page-0" data-page="0">
        <div class="page-content intro-page">
            <div class="page-overlay">
                <!-- Title Text Overlay -->
                <div class="title-overlay">
                    <h1 class="main-title-text">Traffic Collisions in Toronto</h1>
                    <h2 class="subtitle-text">from 1960-2025</h2>
                </div>
                
                <!-- Sign on the right -->
                <div class="sign-container-right">
                    <img src="imgs/dummies_sign.png" alt="Road sign" class="dummies-sign-image">
                </div>
                
                <!-- Foreground element -->
                <img src="imgs/foreground (1).png" alt="Foreground" class="foreground-image">
                
                <!-- Cars positioned on the road -->
                <div class="cars-container">
                    <img src="imgs/small_car.png" alt="Small car" class="car car-small">
                    <img src="imgs/med_car.png" alt="Medium car" class="car car-medium">
                    <img src="imgs/big_car.png" alt="Big car" class="car car-big">
                </div>
            </div>
        </div>
    </section>

    <!-- Page 2: Year Question -->
    <section class="page" id="page-1" data-page="1">
        <div class="page-content">
            <div class="page-overlay">
                <!-- Side sign on top right - scrollable year container -->
                <div class="side-sign-container year-scroll-sign">
                    <img src="imgs/side_sign.png" alt="Year sign" class="side-sign-image">
                    <div class="side-sign-scroll-content">
                        <div class="side-sign-year-item" data-year="2006">2006</div>
                        <div class="side-sign-year-item" data-year="2007">2007</div>
                        <div class="side-sign-year-item" data-year="2008">2008</div>
                        <div class="side-sign-year-item" data-year="2009">2009</div>
                        <div class="side-sign-year-item" data-year="2010">2010</div>
                        <div class="side-sign-year-item" data-year="2011">2011</div>
                        <div class="side-sign-year-item" data-year="2012">2012</div>
                        <div class="side-sign-year-item" data-year="2013">2013</div>
                        <div class="side-sign-year-item" data-year="2014">2014</div>
                        <div class="side-sign-year-item" data-year="2015">2015</div>
                        <div class="side-sign-year-item" data-year="2016">2016</div>
                        <div class="side-sign-year-item" data-year="2017">2017</div>
                        <div class="side-sign-year-item" data-year="2018">2018</div>
                        <div class="side-sign-year-item" data-year="2019">2019</div>
                        <div class="side-sign-year-item" data-year="2020">2020</div>
                        <div class="side-sign-year-item" data-year="2021">2021</div>
                        <div class="side-sign-year-item" data-year="2022">2022</div>
                        <div class="side-sign-year-item" data-year="2023">2023</div>
                    </div>
                    <div class="side-sign-text highway-font" id="yearSignDisplay">2023</div>
                </div>
                
                <div class="question-text">In each year, who's involved in the most accidents?</div>
                <div class="sign-container">
                    <div class="warning-signs">
                        <div class="warning-sign" data-type="pedestrian">
                            <img src="imgs/pedsign.png" alt="Pedestrian" class="warning-icon">
                        </div>
                        <div class="warning-sign" data-type="bicycle">
                            <img src="imgs/bikesign.png" alt="Bicycle" class="warning-icon">
                        </div>
                        <div class="warning-sign" data-type="car">
                            <img src="imgs/carsign.png" alt="Car" class="warning-icon">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Page 3: Time Question -->
    <section class="page" id="page-2" data-page="2">
        <div class="page-content">
            <div class="page-overlay">
                <div class="question-text">At each hour of the day, who's involved in the most accidents?</div>
                <div class="sign-container">
                    <div class="road-sign time-sign">
                        <div class="sign-text highway-font" id="timeSignDisplay">01:00</div>
                    </div>
                    <div class="warning-signs">
                        <div class="warning-sign" data-type="pedestrian">
                            <img src="imgs/pedsign.png" alt="Pedestrian" class="warning-icon">
                        </div>
                        <div class="warning-sign" data-type="bicycle">
                            <img src="imgs/bikesign.png" alt="Bicycle" class="warning-icon">
                        </div>
                        <div class="warning-sign" data-type="car">
                            <img src="imgs/carsign.png" alt="Car" class="warning-icon">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Page 4: Pedestrian Question with Bar Chart -->
    <section class="page" id="page-3" data-page="3">
        <div class="page-content">
            <div class="page-overlay">
                <div class="question-text">What's the most common way pedestrians are involved in collisions?</div>
                <div class="sign-container">
                    <div class="road-sign chart-sign">
                        <div class="sign-text highway-font year-label">2023</div>
                        <div id="pedestrianChart" class="bar-chart-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Page 5: Main Visualization Page -->
    <section class="page" id="page-4" data-page="4">
        <div class="page-content main-viz-page">
            <header class="py-4 text-center">
                <h1 class="fw-bold mb-2">Accident Injury Analysis</h1>
                <p class="fs-5 mb-0">
                    Visualizing accident injuries by time and year in Toronto
                </p>
            </header>

            <main class="flex-fill my-4">
                <div class="container-fluid">
                    <div class="d-flex gap-4">
                        <!-- Left Panel - Time Control Only -->
                        <div class="viz-section left-panel">
                            <h5 class="mb-3">Time Control</h5>
                            <div class="align-self-center" id="timeSlider"></div>
                            <div id="timeDisplay" class="mt-3 text-white">
                                <p>Current Time: <span id="currentTimeDisplay">6:30 PM</span></p>
                                <p>Time Period: <span id="timePeriodDisplay">Evening</span></p>
                            </div>
                        </div>

                        <div class="viz-section right-panel">
                            <!-- Visualization Container with Year Scroller -->
                            <div id="combinedVizContainer" style="position: relative;">
                                <!-- Main Visualization -->
                                <div id="vizContainer" style="height: 400px;"></div>

                                <!-- Year Scroller integrated as X-axis -->
                                <div id="yearScroller" style="height: 100px; margin-top: 10px;"></div>
                            </div>

                            <!-- Year display -->
                            <div id="yearDisplay" class="text-center mt-3 text-white">
                                <p>Selected Year: <span id="currentYearDisplay">2006</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <footer class="py-3 text-center mt-auto">
                <small>Created with D3.js • 2025 • Accident Data Visualization</small>
            </footer>
        </div>
    </section>

    <!-- Page 6: Dashboard/Map View -->
    <section class="page" id="page-5" data-page="5">
        <div class="page-content dashboard-page">
            <img src="imgs/image 10.png" alt="Dashboard" class="dashboard-background">
            <div class="dashboard-overlay">
                <div class="dashboard-content">
                    <div class="infotainment-screen">
                        <div class="map-container" id="mapContainer">
                            <!-- Map visualization will go here -->
                            <div class="map-placeholder">Map Visualization</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Tooltip -->
<div id="tooltip" class="tooltip"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="js/background.js"></script>
<script src="js/scrollNavigation.js"></script>
<script src="js/timeSlider.js"></script>
<script src="js/visual.js"></script>
<script src="js/yearScroll.js"></script>
<script src="js/nextPage.js"></script>
<script src="js/main.js"></script>
<script src="js/yearQuestion.js"></script>

</body>
</html>